<!doctype html><html lang=en><head><title>使用TensorFlow快速实现自己的图片分类器 ::
达则兼济天下</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="这篇教程是利用现成的TensorFlow轮子快速实现一个图片分类器。 先说下背景：最新在做一个有趣的网站：meizigif.com 主要是抓取微博上好看的小姐姐图片贴到网站上。但是我又懒得一张张筛选，因为小姐姐们有时会发抠脚大汉的图。这时就需要一个”鉴黄“服务：检查图片是否sexy。 最开始用的是这个open_nsfw , 效果不好。 还是得用自己的图片集训练。 具体做法如下： GitHub上找到一个现成的轮子sourcedexter/tfClassifier。 照着这个教程操作即可。 有几个注意点：
至少要有两个分类， 我这个case是用sexy和not sexy 两类 这种错误是因为图片有问题，直接删掉即可。文件名就在错误提示前一行 Fail to slurp xxx file, reason: Failed to read from given file 这个错误是因为TensorFlow 版本不同， 把retrain.py中的SummaryWriter改成tf.summary.FileWriter即可 AttributeError: module &amp;#39;tensorflow.python.training.training&amp;#39; has no attribute &amp;#39;SummaryWriter&amp;#39; 验证效果 python3 retrain_model_classifier.py xxx.jpg 这时如果提示找不到output.pb，是因为教程中的命令生成的是output文件， 需要重命名成output.pb。默认的labels.txt在/tmp/下面， 需要mv过来。
以上 简单用没啥技术含量，但迅速解决了我的需求。"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://www.liaol.net/posts/tensorflow-image-classifier/><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://www.liaol.net/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://www.liaol.net/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://www.liaol.net/img/favicon.png><link href=/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="使用TensorFlow快速实现自己的图片分类器"><meta name=twitter:description content="这篇教程是利用现成的TensorFlow轮子快速实现一个图片分类器。 先说下背景：最新在做一个有趣的网站：meizigif.com 主要是抓取微博上好看的小姐姐图片贴到网站上。但是我又懒得一张张筛选，因为小姐姐们有时会发抠脚大汉的图。这时就需要一个”鉴黄“服务：检查图片是否sexy。 最开始用的是这个open_nsfw , 效果不好。 还是得用自己的图片集训练。 具体做法如下： GitHub上找到一个现成的轮子sourcedexter/tfClassifier。 照着这个教程操作即可。 有几个注意点：
至少要有两个分类， 我这个case是用sexy和not sexy 两类 这种错误是因为图片有问题，直接删掉即可。文件名就在错误提示前一行 Fail to slurp xxx file, reason: Failed to read from given file 这个错误是因为TensorFlow 版本不同， 把retrain.py中的SummaryWriter改成tf.summary.FileWriter即可 AttributeError: module 'tensorflow.python.training.training' has no attribute 'SummaryWriter' 验证效果 python3 retrain_model_classifier.py xxx.jpg 这时如果提示找不到output.pb，是因为教程中的命令生成的是output文件， 需要重命名成output.pb。默认的labels.txt在/tmp/下面， 需要mv过来。
以上 简单用没啥技术含量，但迅速解决了我的需求。"><meta property="og:title" content="使用TensorFlow快速实现自己的图片分类器"><meta property="og:description" content="这篇教程是利用现成的TensorFlow轮子快速实现一个图片分类器。 先说下背景：最新在做一个有趣的网站：meizigif.com 主要是抓取微博上好看的小姐姐图片贴到网站上。但是我又懒得一张张筛选，因为小姐姐们有时会发抠脚大汉的图。这时就需要一个”鉴黄“服务：检查图片是否sexy。 最开始用的是这个open_nsfw , 效果不好。 还是得用自己的图片集训练。 具体做法如下： GitHub上找到一个现成的轮子sourcedexter/tfClassifier。 照着这个教程操作即可。 有几个注意点：
至少要有两个分类， 我这个case是用sexy和not sexy 两类 这种错误是因为图片有问题，直接删掉即可。文件名就在错误提示前一行 Fail to slurp xxx file, reason: Failed to read from given file 这个错误是因为TensorFlow 版本不同， 把retrain.py中的SummaryWriter改成tf.summary.FileWriter即可 AttributeError: module 'tensorflow.python.training.training' has no attribute 'SummaryWriter' 验证效果 python3 retrain_model_classifier.py xxx.jpg 这时如果提示找不到output.pb，是因为教程中的命令生成的是output文件， 需要重命名成output.pb。默认的labels.txt在/tmp/下面， 需要mv过来。
以上 简单用没啥技术含量，但迅速解决了我的需求。"><meta property="og:type" content="article"><meta property="og:url" content="https://www.liaol.net/posts/tensorflow-image-classifier/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-03-23T23:46:03+08:00"><meta property="article:modified_time" content="2019-03-23T23:46:03+08:00"><meta property="og:site_name" content="达则兼济天下"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2453465456861242" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-68FSBJF5BP"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-68FSBJF5BP")</script></head><body class=light-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>达则兼济天下</span>
<span class=logo__cursor></span></a>
<span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><article class=post><h1 class=post-title>使用TensorFlow快速实现自己的图片分类器</h1><div class=post-meta><time class=post-date>2019-03-23</time></div><div class=post-content><p>这篇教程是利用现成的TensorFlow轮子快速实现一个图片分类器。
先说下背景：最新在做一个有趣的网站：<a href=https://www.meizigif.com>meizigif.com</a> 主要是抓取微博上好看的小姐姐图片贴到网站上。但是我又懒得一张张筛选，因为小姐姐们有时会发抠脚大汉的图。这时就需要一个”鉴黄“服务：检查图片是否sexy。
最开始用的是这个<a href=https://github.com/mdietrichstein/tensorflow-open_nsfw>open_nsfw</a> , 效果不好。 还是得用自己的图片集训练。
具体做法如下：
GitHub上找到一个现成的轮子<a href=https://github.com/sourcedexter/tfClassifier>sourcedexter/tfClassifier</a>。
照着这个<a href=https://sourcedexter.com/retrain-tensorflow-inception-model/>教程</a>操作即可。
有几个注意点：</p><ol><li>至少要有两个分类， 我这个case是用sexy和not sexy 两类</li><li>这种错误是因为图片有问题，直接删掉即可。文件名就在错误提示前一行</li></ol><pre tabindex=0><code>Fail to slurp xxx file, reason: Failed to read from given file
</code></pre><ol start=3><li>这个错误是因为TensorFlow 版本不同， 把retrain.py中的SummaryWriter改成tf.summary.FileWriter即可</li></ol><pre tabindex=0><code>AttributeError: module &#39;tensorflow.python.training.training&#39; has no attribute &#39;SummaryWriter&#39;
</code></pre><ol start=4><li>验证效果</li></ol><pre tabindex=0><code>python3 retrain_model_classifier.py xxx.jpg
</code></pre><p>这时如果提示找不到output.pb，是因为教程中的命令生成的是output文件， 需要重命名成output.pb。默认的labels.txt在/tmp/下面， 需要mv过来。</p><p>以上
简单用没啥技术含量，但迅速解决了我的需求。</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://www.liaol.net/posts/2019-summary/><span class=button__icon>←</span>
<span class=button__text>2019总结</span></a></span>
<span class="button next"><a href=https://www.liaol.net/posts/dental-implant-in-beijing/><span class=button__text>北京大学口腔医院种植牙记录</span>
<span class=button__icon>→</span></a></span></div></div><script src=https://giscus.app/client.js data-repo=liaol/liaol.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkyNDI2NTY1OA==" data-category=Announcements data-category-id=DIC_kwDOAXJDus4CbdX8 data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></article></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>达则兼济天下</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span><a href=https://github.com/panr/hugo-theme-hello-friend target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>